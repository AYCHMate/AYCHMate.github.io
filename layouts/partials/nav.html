{{ $textColor := cond .IsHome "white" "primary" }}
{{ $backgroundColor := cond .IsHome "bg-trans-white" "bg-gray-100" }}
{{ $borderColor := cond .IsHome "border-transparent" "border-primary" }}
{{ $defaultPos := cond .IsHome "absolute" "relative" }}
<nav x-data="{ isNavOpen: false }" :class="isNavOpen ? 'relative' : '{{ $defaultPos }}'" class="w-full text-{{ $textColor }} absolute lg:px-8 {{ $backgroundColor }} border-b {{ $borderColor }}">
    <div class="flex justify-between items-center w-full">
        <a class="flex items-center hover:no-underline p-2 lg:pl-0" href="{{ .Site.LanguagePrefix }}/">
            <img src="/presskit/cryptomator-logo.svg" class="h-8" />
            <span class="font-headline font-bold ml-2">CRYPTOMATOR</span>
        </a>

        <!-- Regular Navigation -->
        <div class="hidden md:block flex-grow mb-0 text-right">
            {{ with .Site.GetPage "/downloads" }}<a class="py-2 mx-2 lg:mx-4 border-b-2 border-transparent hover:border-{{ $textColor }} hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            {{ with .Site.GetPage "/coop" }}<a class="py-2 mx-2 lg:mx-4 border-b-2 border-transparent hover:border-{{ $textColor }} hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            {{ with .Site.GetPage "/faq" }}<a class="py-2 mx-2 lg:mx-4 border-b-2 border-transparent hover:border-{{ $textColor }} hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            <a class="py-2 mx-2 lg:mx-4 border-b-2 border-transparent hover:border-{{ $textColor }} hover:no-underline" href="https://docs.cryptomator.org/" target="_blank">Docs</a>
            {{ with .Site.GetPage "/donate" }}<a class="py-2 mx-2 lg:mx-4 border-b-2 border-transparent hover:border-{{ $textColor }} hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}

            <span class="p-2 lg:px-4">|</span>

            <div x-data="{ isLangDropdownOpen: false }" class="inline-block p-2 lg:px-4">
                <div class="inline relative">
                    <button @click="isLangDropdownOpen = !isLangDropdownOpen" class="relative flex items-center">
                        <span class="ml-1">{{ .Site.Language.Lang | upper }}</span>
                        <i class="far fa-chevron-down text-xs ml-1"></i>
                    </button>
                    <div x-show="isLangDropdownOpen" @click.away="isLangDropdownOpen = false" class="absolute text-left right-0 mt-2 py-2 w-48 bg-gray-100 rounded shadow-xl">
                        {{ range .Translations }}
                        <a href="{{ .Permalink }}" class="block px-4 py-2 text-gray-800 hover:bg-secondary hover:hover:no-underline">{{ .Language.LanguageName }}</a>
                        {{ end }}
                    </div>
                </div>
            </div>
            <a class="p-2 lg:px-4 hover:no-underline" href="https://twitter.com/Cryptomator" target="_blank"><i class="fab fa-twitter"></i></a>
            <a class="p-2 lg:px-4 lg:pr-0 hover:no-underline" href="https://facebook.com/Cryptomator" target="_blank"><i class="fab fa-facebook-f"></i></a>
        </div>

        <div class="md:hidden flex-grow-0">
            <button @click="isNavOpen = !isNavOpen" type="button" class="border border-{{ $textColor }} rounded px-2 py-1 m-2">
                <i x-show="isNavOpen" class="far fa-times fa-fw"></i>
                <i x-show="!isNavOpen" class="fas fa-bars fa-fw"></i>
            </button>
        </div>
    </div>

    <!-- Smartphone Navigation -->
    <div :class="isNavOpen ? 'block' : 'hidden'" x-cloak class="mb-0 lg:mr-8">
        <div class="md:flex md:items-center">
            {{ with .Site.GetPage "/downloads" }}<a class="block py-2 mx-2 lg:mx-4 hover:text-secondary hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            {{ with .Site.GetPage "/coop" }}<a class="block py-2 mx-2 lg:mx-4 hover:text-secondary hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            {{ with .Site.GetPage "/faq" }}<a class="block py-2 mx-2 lg:mx-4 hover:text-secondary hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            <a class="block py-2 mx-2 lg:mx-4 hover:text-secondary hover:no-underline" href="https://docs.cryptomator.org/" target="_blank">Docs</a>
            {{ with .Site.GetPage "/donate" }}<a class="block py-2 mx-2 lg:mx-4 hover:text-secondary hover:no-underline" href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}
            <span class="hidden p-2 lg:px-4 md:block">|</span>
            <hr class="border-secondary my-2 md:hidden"/>
            <div x-data="{ isLangDropdownOpen: false }" class="hidden p-2 lg:px-4 md:block">
                <div class="relative">
                    <button @click="isLangDropdownOpen = !isLangDropdownOpen" class="relative flex items-center">
                        <span class="ml-1">{{ .Site.Language.Lang | upper }}</span>
                        <i class="far fa-chevron-down text-xs ml-1"></i>
                    </button>
                    <div x-show="isLangDropdownOpen" @click.away="isLangDropdownOpen = false" class="absolute right-0 mt-2 py-2 w-48 bg-gray-100 rounded shadow-xl">
                        {{ range .Translations }}
                        <a href="{{ .Permalink }}" class="block px-4 py-2 text-gray-800 hover:bg-secondary hover:hover:no-underline">{{ .Language.LanguageName }}</a>
                        {{ end }}
                    </div>
                </div>
            </div>
            <div class="hidden md:flex md:items-center">
                <a class="block p-2 lg:px-4 hover:no-underline" href="https://twitter.com/Cryptomator" target="_blank"><i class="fab fa-twitter"></i></a>
                <a class="block p-2 lg:px-4 lg:pr-0 hover:no-underline" href="https://facebook.com/Cryptomator" target="_blank"><i class="fab fa-facebook-f"></i></a>
            </div>
        </div>
        <div class="block md:hidden">
            <div class="uppercase tracking-wide text-gray-500 text-xs font-bold p-2">
                <i class="fas fa-globe fa-fw"></i> {{ .Site.Language.Lang | upper }}
            </div>
            <div class="mt-1">
                {{ range .Translations }}
                <a href="{{ .Permalink }}" class="block px-2 py-1 hover:text-secondary hover:no-underline">{{ .Language.LanguageName }}</a>
                {{ end }}
            </div>
            <hr class="border-secondary my-2 md:hidden"/>
            <a class="block p-2 hover:text-secondary hover:no-underline" href="https://twitter.com/Cryptomator" target="_blank">
                <i class="fab fa-twitter fa-fw"></i>
                <span>Cryptomator on Twitter</span>
            </a>
            <a class="block p-2 hover:text-secondary hover:no-underline" href="https://facebook.com/Cryptomator" target="_blank">
                <i class="fab fa-facebook-f fa-fw"></i>
                <span>Cryptomator on Facebook</span>
            </a>
        </div>
    </div>
</nav>
